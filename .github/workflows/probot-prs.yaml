name: probot-prs
on:
  pull_request:
    types: [opened, reopened]
jobs:
  bot:
    runs-on: ubuntu-latest
    steps:
        - name: Post comment
          if: startsWith(github.event.pull_request.title, 'Bump probot')
          uses: actions/github-script@v7.0.1
          with:
            script: |
                const pull_number = context.payload.pull_request.number;
                await github.pulls.createReview({
                  owner: context.repo.owner,
                  repo: context.repo.repo,
                  pull_number: pull_number,
                  body: '👋🏻🤖 The latest probot uses a newer octokit, which is not compatible with nock.',
                  event: 'REQUEST_CHANGES'
                });
